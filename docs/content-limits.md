# 内容上限规则

> 本文档基于 DOE（设计实验）测试结果，量化了每种幻灯片布局可容纳的最大内容量。
> AI 生成内容时**必须**遵守这些规则，以防止内容溢出页面边界。
>
> 测试条件：`am_consulting` 主题，16:9 比例，约 60 页不同布局 + 不同内容密度的组合测试。

---

## 核心原则

1. **宁可留白，不可溢出** —— 内容溢出页面底部是最严重的排版事故，留白则完全可接受。建议按上限的 **80%** 填充内容。
2. **不确定时选择更简单的布局** —— 内容多时优先用普通页或 `cols-2`，而非 `rows-2` 或 `cols-3`。
3. **左右分栏优于上下分栏** —— 上下分栏（`rows-2` 系列）容量极为有限，AI 应尽量少用，仅在"上方展示数据/下方给出结论"的场景下使用。
4. **非对称分栏的窄侧必须放高密度内容** —— 窄侧（30%-40%）放稀疏列表会导致视觉失衡，应放指标表格、KPI 卡片或图片。

---

## 1. 普通页（无布局类）

### 无 navbar

| 内容类型 | 上限数量 | 安全数量（推荐） | 测试依据 |
|---------|---------|----------------|---------|
| 单行列表项（短文本，每行 < 25 字） | **15 条** | 12 条 | A3 = 满（极限） |
| 单行列表项（长文本，每行 30-50 字） | **12 条** | 10 条 | A2 = OK 有余量 |
| 长文本条目（每条 2-3 行，80+ 字） | **6 条** | 5 条 | E2 = OK |
| 表格行数（6 列） | **10 行** | 8 行 | A6 = 刚好合适 |
| 表格行数（5 列） | **10 行** | 8 行 | A4/A5 均有余量 |
| 列表 + 表格混合 | 3 条列表 + 4 行表格 | 3 + 4 | A7 = 有余量 |
| blockquote + 列表 | 1 段引用 + 5 条列表 | 1 + 5 | A8 = 有余量 |
| h4 标题 + 列表 + 表格 + 引用混合 | 2 条列表 + 3 行表格 + 1 引用 | 同左 | E8 = OK |

### 有 navbar

添加 `navbar` 后顶部占用约 52px，可用高度减少约 **15%**。

| 内容类型 | 上限数量 | 安全数量（推荐） | 测试依据 |
|---------|---------|----------------|---------|
| 单行列表项（短文本） | **12 条** | 10 条 | A9 = 有余量（10 条时） |
| 单行列表项（长文本） | **10 条** | 8 条 | 按比例缩减 |
| 表格行数（6 列） | **8 行** | 7 行 | A10 = 有余量（8 行时） |

---

## 2. 左右分栏（cols-2）

### cols-2（50/50 等分）

#### 无 navbar

| 内容类型 | 每栏上限 | 每栏安全数量 | 测试依据 |
|---------|---------|------------|---------|
| 列表项 | **10 条** | 8 条 | B3(10) = OK；B2(8) = 有余量 |
| 表格行数 | **7 行** | 5-6 行 | B5(7) = 有余量；B4(5) = OK |
| blockquote + 列表 | 1 引用 + 8 列表 | 同左 | E3 = OK |

#### 有 navbar

| 内容类型 | 每栏上限 | 每栏安全数量 | 测试依据 |
|---------|---------|------------|---------|
| 列表项 | **8 条** | 7 条 | B6(8) = OK |
| 表格行数 | **6 行** | 5 行 | B7(6) = 有余量 |

### cols-2-64 / cols-2-73（左宽右窄）

| 布局 | 左侧（宽侧）上限 | 右侧（窄侧）上限 | 测试依据 |
|------|----------------|----------------|---------|
| cols-2-64 | 列表 10 条 | 列表 5 条 | B8/B9 = 右侧太空 |
| cols-2-64+navbar | 列表 8 条 | 列表 5 条 | B10 = 右侧太空 |
| cols-2-73 | 列表 8 条 | 小表格 3 行 | B11 = 右侧太空 |
| cols-2-73+navbar | 列表 8 条 | 小表格 3 行 | B12 = 右侧太空 |

> **警告：** 所有测试中右侧（窄侧）均显示"太空"。这意味着：
> - 右侧 **不适合** 放稀疏的短列表
> - 右侧 **必须** 放高视觉密度内容：指标/KPI 表格、小型数据表、图片、图标矩阵等
> - 如果右侧内容不够密集，改用 `cols-2`（等分）代替

### cols-2-46 / cols-2-37（左窄右宽）

| 布局 | 左侧（窄侧）上限 | 右侧（宽侧）上限 | 测试依据 |
|------|----------------|----------------|---------|
| cols-2-46 | 小表格 4 行 | 列表 8 条 | B13 = 左侧太空 |
| cols-2-46+navbar | 小表格 4 行 | 列表 6 条 | B14 = 左侧太空 |
| cols-2-37 | 小表格 6 行 | 列表 8 条 | B15 = 左侧太空 |
| cols-2-37+navbar | 小表格 6 行 | 列表 7 条 | B16 = 左侧太空 |

> **警告：** 与上同理，左侧（窄侧）放稀疏内容会导致视觉失衡。
> - 左侧 **必须** 放高视觉密度内容
> - 如果左侧内容不够密集，改用 `cols-2`（等分）代替

### 非对称分栏的使用原则

| 场景 | 推荐布局 | 宽侧放什么 | 窄侧放什么 |
|------|---------|-----------|-----------|
| 详细分析 + 关键指标 | `cols-2-64` 或 `cols-2-73` | 长列表、段落、详细表格 | KPI 表格、指标卡片、小表格 |
| 指标概览 + 详细说明 | `cols-2-46` 或 `cols-2-37` | 长列表、段落、详细表格 | KPI 表格、指标卡片、小表格 |
| 图文混排 | `cols-2-64` / `cols-2-46` | 文字说明 | 图片（使用 `rimg`/`limg`） |
| 两侧内容量接近 | `cols-2` | 任意 | 任意 |

**核心规则：** 窄侧占比 <= 40% 时，该侧内容必须是"一眼看完"的高密度元素（表格、指标、图片），绝不能是长列表或长段落。

---

## 3. 三栏布局（cols-3）

### 无 navbar

| 内容类型 | 每栏上限 | 每栏安全数量 | 测试依据 |
|---------|---------|------------|---------|
| 列表项 | **9 条** | 7 条 | C3(9) = OK；C2(7) = OK |
| 列表项（不建议少于） | — | 至少 6 条 | C1(5) = 太空 |

### 有 navbar

| 内容类型 | 每栏上限 | 每栏安全数量 | 测试依据 |
|---------|---------|------------|---------|
| 列表项 | **8 条** | 7 条 | C4(6) = 太空 |

> **注意：** 三栏布局每栏宽度仅约 33%，文本会自动换行导致占用更多行高。因此：
> - 每条列表项应保持 **简短**（15 字以内最佳）
> - 表格不适合放在三栏中（列太窄）
> - 三栏最佳用途：阶段对比、方案比较、分类展示

---

## 4. 上下分栏（rows-2 系列）

> **重要警告：** 上下分栏容量极为有限，是最容易溢出的布局。AI 生成幻灯片时应 **尽量少用** rows-2 系列，优先选择 cols-2 系列。仅在"上方数据 + 下方结论"或"上方表格 + 下方要点"等明确的上下语义关系时使用。

### rows-2（50/50 等分）

| 内容类型 | 每区上限 | 每区安全数量 | 测试依据 |
|---------|---------|------------|---------|
| 列表项 | **5 条** | 4 条 | D1(5) = 刚好满；D2(7) = **溢出** |
| 表格(上) + 列表(下) | 4 行表格 + 3 条列表 | 同左 | D3 = OK |

### rows-2+navbar

| 内容类型 | 每区上限 | 每区安全数量 | 测试依据 |
|---------|---------|------------|---------|
| 表格(上) + 列表(下) | 4 行表格 + 3 条列表 | 同左 | D4 = OK |

### rows-2-64（上 60% / 下 40%）

| 内容类型 | 上部上限 | 下部上限 | 测试依据 |
|---------|---------|---------|---------|
| 列表(上) + 表格(下) | 5-6 条 | 3 行表格 | D5(7+表格) = **溢出** |
| +navbar | 5 条 | 3 行表格 | D6 = **溢出**（7 条时） |

### rows-2-73（上 70% / 下 30%）

| 内容类型 | 上部上限 | 下部上限 | 测试依据 |
|---------|---------|---------|---------|
| 表格(上) + 要点(下) | 4 行表格 | 1 段总结文字 | D7 = OK |
| +navbar | 4 行表格 | 1 段总结文字 | D8 = OK |

### rows-2-46（上 40% / 下 60%）

| 内容类型 | 上部上限 | 下部上限 | 测试依据 |
|---------|---------|---------|---------|
| 引用(上) + 表格(下) | 1 段引用 | 5 行表格 | D9 = OK |
| +navbar | 1 短引用 | 5 行表格 | D10 = OK |

### rows-2-37（上 30% / 下 70%）

| 内容类型 | 上部上限 | 下部上限 | 测试依据 |
|---------|---------|---------|---------|
| 列表(上) + 表格(下) | 2 条列表 | 6 行表格 | D11 = OK |
| +navbar | 2 条列表 | 6 行表格 | D12 = OK |

### rows-2 通用规则

- **rows-2 每区最多 5 条列表项**，超过必溢出
- rows-2-64/73 上部为主体区域，下部只放 1-3 条精简总结或小表格
- rows-2-46/37 上部只放简短引用或 2 条要点，下部放表格
- 添加 navbar 后每区再减 1 条
- **当内容超过上述限制时，必须改用 `cols-2` 布局**

---

## 5. 特殊布局

### footnote

| 内容类型 | 主体区（tdiv）上限 | 脚注区（bdiv）上限 |
|---------|------------------|------------------|
| 列表 + 脚注文献 | 4-5 条列表 | 2-3 行脚注 |
| +navbar | 3-4 条列表 | 2-3 行脚注 |

> **注意：** footnote 布局使用 `grid-template-rows: 1fr auto`，脚注区自动贴底。主体区不要放太多内容以免与脚注重叠。

### 嵌套列表

| 嵌套层级 | 最大顶层项数 | 说明 |
|---------|------------|------|
| 二级嵌套（每项 1-2 子项） | **8 个** 顶层项 | 每个顶层项算约 2 行 |
| 三级嵌套（每项 2 子项，每子项 2 孙项） | **4-5 个** 顶层项 | 每个顶层项算约 3-4 行 |

> **警告：** E1 测试（8 个顶层项 x 三级嵌套）已溢出。三级嵌套时顶层项不超过 5 个，最安全为 4 个。

**换算规则：** 嵌套列表按"等效行数"计算：
- 每个二级子项 = 1 行
- 每个三级子项 = 1 行
- 顶层项本身 = 1 行
- 总等效行数不超过普通页列表上限（12-14 行）

### smalltext

`smalltext` 将正文字号缩小至 85%，等效增加约 **25%** 的内容容量。

| 原始布局 | 原始列表上限 | smalltext 后上限 |
|---------|------------|----------------|
| 普通页 | 12 条 | **15 条** |
| cols-2 每栏 | 10 条 | **12 条** |
| cols-3 每栏 | 9 条 | **11 条** |
| rows-2 每区 | 5 条 | **6 条** |

> 测试依据：E6 = 15 条 smalltext 列表 OK

### largetext

`largetext` 将正文字号增大至 115%，等效减少约 **20%** 的内容容量。

| 原始布局 | 原始列表上限 | largetext 后上限 |
|---------|------------|----------------|
| 普通页 | 12 条 | **8 条** |
| cols-2 每栏 | 10 条 | **8 条** |

> 测试依据：E7 = 8 条 largetext 列表 OK

### bq-green / bq-red / bq-blue / bq-black

引用盒子（callout box）包含一个彩色标题栏 + 正文区域，本身占用较多纵向空间。

| 场景 | 推荐内容量 | 测试依据 |
|------|-----------|---------|
| 引用盒子 + 列表 | 1 个引用盒子（标题 + 1-2 行正文）+ 4 条列表 | E4 = OK |
| 引用盒子 + 列表 + navbar | 1 个引用盒子（标题 + 1 行正文）+ 4 条列表 | E5 = OK |

> **注意：** 引用盒子标题栏本身算 2-3 行等效高度。一页中不要放超过 1 个引用盒子。

---

## 6. 通用估算公式

当你不确定内容是否会溢出时，使用以下简化公式：

### 等效行数计算法

**步骤 1：计算内容的"等效行数"**

| 内容元素 | 等效行数 |
|---------|---------|
| 短列表项（< 25 字） | 1 行 |
| 中等列表项（25-50 字） | 1.5 行 |
| 长列表项（50-80 字） | 2 行 |
| 超长列表项（> 80 字） | 2.5-3 行 |
| 表格标题行 | 1.5 行 |
| 表格数据行 | 1 行 |
| h4 小标题 | 2 行（含上下间距） |
| blockquote（1-2 句） | 3 行 |
| blockquote（3-4 句） | 5 行 |
| 引用盒子（bq-*） | 标题 2.5 行 + 正文按实际行数 |
| 空行 / 段落间距 | 0.5 行 |

**步骤 2：对照布局的行数上限**

| 布局 | 无 navbar 行数上限 | 有 navbar 行数上限 |
|------|------------------|------------------|
| 普通页 | **16 行** | **14 行** |
| cols-2 每栏 | **14 行** | **12 行** |
| cols-3 每栏 | **12 行** | **10 行** |
| rows-2 每区 | **7 行** | **6 行** |
| rows-2-64 上部 | **9 行** | **8 行** |
| rows-2-64 下部 | **5 行** | **4 行** |
| rows-2-73 上部 | **10 行** | **9 行** |
| rows-2-73 下部 | **3 行** | **3 行** |
| rows-2-46 上部 | **5 行** | **4 行** |
| rows-2-46 下部 | **9 行** | **8 行** |
| rows-2-37 上部 | **3 行** | **3 行** |
| rows-2-37 下部 | **10 行** | **9 行** |

**步骤 3：判断**

```
如果 等效行数总和 <= 行数上限 × 0.8 → 安全
如果 等效行数总和 <= 行数上限     → 可以但较满
如果 等效行数总和 > 行数上限      → 必须拆分或换布局
```

### 快速估算口诀

```
普通页列表十二条，表格十行六列高。
左右分栏八到十，三栏七条恰刚好。
上下分栏五条满，超过必须换分栏。
导航栏减两成量，嵌套列表要折算。
小字加两大字减，宁可留白不溢出。
```

---

## 7. 推荐布局选择策略

根据内容量和内容类型，按以下决策树选择布局：

### 决策树

```
Q1: 内容是单一主题还是需要对比/并列？
│
├─ 单一主题 → Q2
│  │
│  ├─ 内容 <= 8 条列表或 6 行表格
│  │  → 普通页（无布局类）
│  │
│  ├─ 内容 9-12 条列表或 7-10 行表格
│  │  → 普通页（无布局类）
│  │
│  ├─ 内容 13-15 条列表
│  │  → 普通页 + smalltext
│  │
│  └─ 内容 > 15 条
│     → 拆分为 2 页，或使用 cols-2 分两组
│
├─ 两组对比/并列 → Q3
│  │
│  ├─ 两组内容量接近
│  │  │
│  │  ├─ 每组 <= 10 条 → cols-2
│  │  ├─ 每组 11-12 条 → cols-2 + smalltext
│  │  └─ 每组 > 12 条 → 拆分为 2 页
│  │
│  ├─ 一组是主体 + 另一组是摘要/指标
│  │  │
│  │  ├─ 主体在左 → cols-2-64 或 cols-2-73
│  │  └─ 主体在右 → cols-2-46 或 cols-2-37
│  │
│  └─ 一组是图表/数据 + 另一组是结论
│     │
│     ├─ 上数据下结论 → rows-2-64（注意容量！）
│     ├─ 上结论下数据 → rows-2-37 或 rows-2-46
│     └─ 内容超过 rows-2 限制 → 改用 cols-2
│
└─ 三组并列 → Q4
   │
   ├─ 每组 7-9 条简短内容 → cols-3
   ├─ 每组 < 7 条 → cols-3（但确保每组至少 6 条以免太空）
   └─ 每组 > 9 条 → 拆分为 2 页（每页 cols-2 或 cols-3）
```

### 布局选择速查表

| 场景 | 首选布局 | 备选布局 |
|------|---------|---------|
| 简单列表（8 条以内） | 普通页 | — |
| 中等列表（9-14 条） | 普通页 | 普通页 + smalltext |
| 大量列表（15+ 条） | 拆分为 2 页 | cols-2（分两组） |
| 单个大表格（8-10 行） | 普通页 | 普通页 + smalltext |
| 两组对比列表 | cols-2 | cols-2 + smalltext |
| 主体 + 辅助指标 | cols-2-64 / cols-2-73 | cols-2 |
| 三阶段/三方案对比 | cols-3 | 拆分 2 页 |
| 数据展示 + 总结要点 | cols-2（左数据右要点） | rows-2-73（仅限内容少时） |
| 正文 + 脚注引用 | footnote | 普通页（脚注放最后一条） |
| 重点结论高亮 | bq-green / bq-red + 列表 | 普通页 + blockquote |
| 少量大字要点 | largetext | 普通页 |
| 密集数据 | smalltext | 普通页 |

### navbar 使用建议

- navbar 适用于 **系列页面**（同一章节连续 3 页以上），用于标示当前所在章节
- 单页使用 navbar 没有意义，浪费 15% 的宝贵空间
- 添加 navbar 后，所有内容上限减少约 15%（等效减 2 行）

---

## 附录：DOE 测试编号对照表

| 编号 | 布局 | 内容配置 | 结果 |
|------|------|---------|------|
| A1 | 普通页 | 列表 x8（长文本） | OK 有余量 |
| A2 | 普通页 | 列表 x12（长文本） | OK 有余量 |
| A3 | 普通页 | 列表 x15（短文本） | 满 - 极限 |
| A4 | 普通页 | 6x5 表格 | 大量余量 |
| A5 | 普通页 | 8x6 表格 | 大量余量 |
| A6 | 普通页 | 10x6 表格 | OK 合适 |
| A7 | 普通页 | 3 条列表 + 4x5 表格 | 大量余量 |
| A8 | 普通页 | 引用 + 5 条列表 | 大量余量 |
| A9 | 普通页+navbar | 列表 x10 | 大量余量 |
| A10 | 普通页+navbar | 8x6 表格 | 大量余量 |
| B1 | cols-2 | 每栏 6 条 | 大量余量 |
| B2 | cols-2 | 每栏 8 条 | 大量余量 |
| B3 | cols-2 | 每栏 10 条 | OK |
| B4 | cols-2 | 每栏 5 行表格 | OK |
| B5 | cols-2 | 每栏 7 行表格 | 大量余量 |
| B6 | cols-2+navbar | 每栏 8 条 | OK |
| B7 | cols-2+navbar | 每栏 6 行表格 | 大量余量 |
| B8 | cols-2-64 | 8 左 + 5 右 | 右侧太空 |
| B9 | cols-2-64 | 10 左 + 小表格右 | 右侧太空 |
| B10 | cols-2-64+navbar | 8 左 + 5 右 | 右侧太空 |
| B11 | cols-2-73 | 8 左 + 小表格右 | 右侧太空 |
| B12 | cols-2-73+navbar | 8 左 + 表格右 | 右侧太空 |
| B13 | cols-2-46 | 表格左 + 8 右 | 左侧太空 |
| B14 | cols-2-46+navbar | 表格左 + 列表右 | 左侧太空 |
| B15 | cols-2-37 | 表格左 + 8 右 | 左侧太空 |
| B16 | cols-2-37+navbar | 表格左 + 列表右 | 左侧太空 |
| C1 | cols-3 | 每栏 5 条 | 太空 |
| C2 | cols-3 | 每栏 7 条 | OK |
| C3 | cols-3 | 每栏 9 条 | OK |
| C4 | cols-3+navbar | 每栏 6 条 | 太空 |
| D1 | rows-2 | 上下各 5 条 | 刚好满 |
| D2 | rows-2 | 上下各 7 条 | **溢出** |
| D3 | rows-2 | 4 行表格 + 3 条列表 | OK |
| D4 | rows-2+navbar | 表格 + 列表 | OK |
| D5 | rows-2-64 | 7 条上 + 表格下 | **溢出** |
| D6 | rows-2-64+navbar | 列表上 + 表格下 | **溢出** |
| D7-D12 | rows-2-73/46/37 | 各种组合 | OK |
| E1 | 普通页 | 三级嵌套 x8 顶层项 | **溢出** |
| E2 | 普通页 | 长文本条目 x6 | OK |
| E3 | cols-2 | 引用 + 列表 | OK |
| E4 | bq-green | 引用盒子 + 列表 | OK |
| E5 | bq-green+navbar | 引用盒子 + 列表 | OK |
| E6 | smalltext | 列表 x15 | OK |
| E7 | largetext | 列表 x8 | OK |
| E8 | 普通页 | h4 + 列表 + 表格 + 引用混合 | OK |
| E9 | footnote | 正文 + 脚注 | OK（CSS 已修复） |
| E10 | footnote+navbar | 正文 + 脚注 | OK（CSS 已修复） |
